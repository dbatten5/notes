# Factor graphs

A square node represents a factor (non negative function) of its neighbouring
variables.

```dot
graph G {
  {
    f1 [shape=square, style=filled, fillcolor=black, fontcolor=white]
    f2 [shape=square, style=filled, fillcolor=black, fontcolor=white]
    f3 [shape=square, style=filled, fillcolor=black, fontcolor=white]
    f4 [shape=square, style=filled, fillcolor=black, fontcolor=white]
  }
  A -- f1;
  f1 -- B;
  B -- f2;
  f2 -- C;
  f2 -- D;
  C -- f3;
  D -- f4;
  f4 -- E;
  f3 -- E;
}
```

The joint function is a product of all the factors:

$$
f(A, B, C, D, E) = f_1(A, B)f_2(B, C, D)f_3(C, E)f_4(D, E)
$$


### Factor graphs vs. Markov networks

1.
```dot
graph G {
  {
    f1 [shape=point, style=filled, fillcolor=black, fontcolor=white]
  }
  A -- f1;
  f1 -- B;
  f1 -- C;
}
```
$\phi(A, B, C)$

2.
```dot
graph G {
  rankdir="LR"
  {
    f1 [shape=point, style=filled, fillcolor=black, fontcolor=white]
    f2 [shape=point, style=filled, fillcolor=black, fontcolor=white]
    f3 [shape=point, style=filled, fillcolor=black, fontcolor=white]
  }
  A -- f1;
  f1 -- B;
  B -- f2;
  f2 -- C;
  C -- f3;
  f3 -- A
}
```
$\phi(A, B)\phi(B, C)\phi(C, A)$

3.
```dot
graph G {
  rankdir="LR";

  A -- B;
  A -- C;
  B -- C;
}
```
$\phi(A, B, C)$

* Both 1 and 2 have the same [Markov network](202210201118.md) (3).
* Whilst 2 contains the same (lack of) independence statements as 1, it
expressed more constants in the form of the potential.
